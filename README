### Note: This is for SIMULATION. The following packages should be used together:
1. gazebo_visual		# for gazebo visulization
2. nubot_ws			# for real robot code
3. coach_ws_no_rtdb		# for sending game command such as kickoff to robots; this does not require rtdb
    The recommended way to run simulation is with two computers running nubot_ws and gazebo_visual seperately. For example, computer A runs gazebo_visual to display the movement of robots. Computer B runs nubot_ws to calculate and send movement commands to robots. In addition, computer B should also run coach to send game command such as game start. 
    The communication between computer A and computer B is via ROS master. The following is the configuration steps:

## Configuration of computer A and computer B
1. In computer A, add computer B's IP address in /etc/hosts; and in computer B, add computer A's IP address in /etc/hosts
e.g. In computer A, $ sudo gedit /etc/hosts and add "Maggie 192.168.8.100"
     In computer B, $ sudo gedit /etc/hosts and add "Bart   192.168.8.101"
2. In computer A, run gazebo_visual; In computer B, before you run nubot_ws, you should export ROS_MASTER_URI.
e.g. In computer B, $ export ROS_MASTER_URI=http://Bart:11311
3. In computer B, run coach and send game command

## Compiling nubot_ws
Method 1:
1. $ sudo chmod +x configure
2. $ ./configure
3. $ catkin_make --pkg nubot_common
4. $ catkin_make --pkg world_model
5. $ catkin_make
Method 2:
$ catkin_make -j1

## To run nubot_ws
1. $ export AGENT=1
2. if rtdb is not used, go to step 3; otherwise, run this command: 
   $ rosrun world_model comm
3. $ ./cyan_spawn_model.sh   or   $ ./magenta_spawn_model.sh

## To run gazeo_visual
1. ./configure
2. $ roslaunch nubot_gazebo game_ready.launch
You can edit global_config to change simulation parameters such as the number of robots

## To run coach_ws_no_rtdb
1. $ roslaunch nubot_coach nubot_coach.launch


## if used with RTDB, then you should change absolute path in rtdb files:
1. rtdb/parser/CMakeLists.txt:
    (1) SET(RTDB_USER_H_FILE   /home/nubot8/nubot_ws/src/nubot/world_model/include/nubot/rtdb/rtdb_user.h)
    (2) SET(RTDB_INI_FILE      /home/nubot8/nubot_ws/src/nubot/world_model/config/rtdb.ini )
    (3) SET(RTDB_Config_FILE   /home/nubot8/nubot_ws/src/nubot/world_model/config/rtdb.config )

2. rtdb/rtdb_api.cpp:    
    std::string ini_config_file="/home/nubot8/nubot_ws/src/nubot/world_model/config/rtdb.ini";
3. rtdb/comm.cpp: 'wlano' or 'wlan1'
4. coach_info_pub.cpp: DB_get(AGENT), this AGENT depends your coach's agent number

## Q&A
1. How to use Gazebo 5 in ROS Jade? (This code works in ROS jade)
    It seems there is a bug in the configuration of Gazebo 5.0 in ROS Jade. So the solution is as follows(steps):
        (a) $ sudo gedit /opt/ros/jade/lib/gazebo_ros/gazebo. In this file, go to line 24 and delete the last '/'. So 'setup_path=$(pkg-config --variable=prefix gazebo)/share/gazebo/' is changed to 'setup_path=$(pkg-config --variable=prefix gazebo)/share/gazebo'.
        You can read this link for more information: "http://answers.ros.org/question/215796/problem-for-install-gazebo_ros_package/"
        (b) Install Gazebo 5. 
        $ sudo apt-get install gazebo5. If this fails, try to run the 'gazebo5_install.sh' in this directoy. Read for more information "http://answers.ros.org/question/217970/ros-jade-and-gazebo-50-migration-problem/"
        (c) Optional: copy resource files to the new gazebo folder.
        $ sudo cp -r /usr/share/gazebo-5.0/* /usr/share/gazebo-5.1
            
            

